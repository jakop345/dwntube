function checkUrl(){var e=$("#url").val(),t=/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/,n=e.match(t);return n?($("#download-btn").fadeOut("fast"),$("#loading").fadeIn("slow"),getVideo(n[1])):(bootstrap_alert.warning('<strong><span style="color: #9e1317;">Alert :</span> DwnTube</strong> can not find Youtube video from your input please check your <strong><span style="color: #9e1317;">URL</span></strong>'),$("#url").focus(),$("#url").select()),!1}function getVideo(e){var t=[],n="_ZohLvPaKzg";""!=e&&(n=e),$.ajax({url:"/proxy.php?url=http://www.youtube.com/get_video_info?video_id="+n+"&asv=2",dataType:"text"}).done(function(e){var n=e.indexOf("contents");e=e.slice(n+11,-2),getinfo(e);var o={};parse_str(e,o);var r=explode(",",o.url_encoded_fmt_stream_map);if("null"==r)bootstrap_alert.warning('<strong><span style="color: #9e1317;">Alert :</span> DwnTube</strong> fail to download this video you can <strong>try again</strong> but <strong><span style="color: #9e1317;">remember DwnTube only support educational video</span></strong>. please check it first is your video <strong>educational importand</strong>'),$("#url").focus(),$("#url").select(),$("#loading").hide(),$("#download-btn").fadeIn("fast");else{for(var a=0;a<r.length;a++){var l={};parse_str(r[a],l),l.url+="&signature="+l.sig,t.push(l)}var s="";s+='<table class="table table-responsive table-hover"><tbody>',t.length>0?$.each(t,function(e,t){var n=t.type.indexOf(";");t.type=-1==n?t.type.slice(6):t.type.slice(6,n);var o="";"hd720"==t.quality?o="desktop":"medium"==t.quality?o="desk-tab":"small"==t.quality&&"x-flv"==t.type?o="tab":"small"==t.quality&&(o="mobile"),s+="\n\r<tr>",s+='<td style="border: none;"><strong><img src="/images/'+o+'.png" /> '+t.quality+"</strong></td>",s+='<td style="border: none;"><strong>'+t.type+"</strong></td>",s+='<td style="border: none;"><a class="btn btn-primary pull-left" href="'+t.url+'" download><i class="icon-download-alt icon-white"></i><span class="glyphicon glyphicon-save"></span> Download</a></td>',s+="</tr>\n\r"}):(s+="\n\r<tr>",s+="<td>N/A</td>",s+="<td>N/A</td>",s+="<td>N/A</td>",s+="</tr>\n\r"),$("#vid").html(s),$("#vid").fadeIn("slow"),$("#loading").hide(),$("#hero2").fadeIn("slow"),$("#hero3").fadeIn("slow"),$("#box1").hide(),$("#box2").hide(),$("#box3").hide(),$("#download-btn").show()}})}function getinfo(e){var t=e.indexOf("thumbnail_url");t=e.slice(t+14);var n=t.indexOf("&");t=t.slice(0,n),t=decodeURIComponent(t);var o=e.indexOf("title");o=e.slice(o+6),n=o.indexOf("&"),o=o.slice(0,n),o=o.replace(/\+/g," ").replace(/%3A/g,":").replace(/%/g," ");var r=e.indexOf("length_seconds");r=e.slice(r+15),n=r.indexOf("&"),r=r.slice(0,n);var a=~~(r/60),l=r%60,s=~~(r/3600),a=~~(r%3600/60),l=r%60;ret="",s>0&&(ret+=""+s+":"+(10>a?"0":"")),ret+=""+a+":"+(10>l?"0":""),ret+=""+l;var i=e.indexOf("author");i=e.slice(i+7),n=i.indexOf("&"),i=i.slice(0,n),i=i.replace(/\+/g," "),$(".info").html('<img src="'+t+'" class="pull-left thumbnail" style="margin-right: 15px";/><p><strong>Title : '+o+"</p><p>Author : "+i+"</p><p> Length : "+ret+"</strong></p>")}function parse_str(e,t){var n,o,r,a,l,s,i,d,c,u,p,f,g,h,b,w=String(e).replace(/^&/,"").replace(/&$/,"").split("&"),v=w.length,y=function(e){return decodeURIComponent(e.replace(/\+/g,"%20"))};for(t||(t=this.window),n=0;v>n;n++){for(u=w[n].split("="),p=y(u[0]),f=u.length<2?"":y(u[1]);" "===p.charAt(0);)p=p.slice(1);if(p.indexOf("\x00")>-1&&(p=p.slice(0,p.indexOf("\x00"))),p&&"["!==p.charAt(0)){for(h=[],g=0,o=0;o<p.length;o++)if("["!==p.charAt(o)||g){if("]"===p.charAt(o)&&g&&(h.length||h.push(p.slice(0,g-1)),h.push(p.substr(g,o-g)),g=0,"["!==p.charAt(o+1)))break}else g=o+1;for(h.length||(h=[p]),o=0;o<h[0].length&&(c=h[0].charAt(o),(" "===c||"."===c||"["===c)&&(h[0]=h[0].substr(0,o)+"_"+h[0].substr(o+1)),"["!==c);o++);for(s=t,o=0,b=h.length;b>o;o++)if(p=h[o].replace(/^['"]/,"").replace(/['"]$/,""),i=o!==h.length-1,l=s,""!==p&&" "!==p||0===o)s[p]===d&&(s[p]={}),s=s[p];else{r=-1;for(a in s)s.hasOwnProperty(a)&&+a>r&&a.match(/^\d+$/g)&&(r=+a);p=r+1}l[p]=f}}}function explode(e,t,n){if(arguments.length<2||"undefined"==typeof e||"undefined"==typeof t)return"null";if(""===e||e===!1||null===e)return!1;if("function"==typeof e||"object"==typeof e||"function"==typeof t||"object"==typeof t)return{0:""};e===!0&&(e="1"),e+="",t+="";var o=t.split(e);return"undefined"==typeof n?o:(0===n&&(n=1),n>0?n>=o.length?o:o.slice(0,n-1).concat([o.slice(n-1).join(e)]):-n>=o.length?[]:(o.splice(o.length+n),o))}function getParameter(e){return decodeURI((RegExp(e+"=(.+?)(&amp;|$)").exec(location.search)||[,null])[1])}$(function(){$("#home a:contains('Home')").parent().addClass("active"),$("#how-to a:contains('How to Download')").parent().addClass("active"),$("#about a:contains('About')").parent().addClass("active")}),$(document).ready(function(){var e=decodeURIComponent(getParameter("url"));if(console.log("url: "+decodeURIComponent(e)),"null"!=e)$("#url").val(e),checkUrl();else if("http://dwntube.com/index.php"!=window.location&&"http://dwntube.com/"!=window.location){e=window.location.href,e=e.slice(19);var t=/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/,n=e.match(t);if(!n){e="https://www.youtube.com/"+e;var n=e.match(t);return n?($("#download-btn").fadeOut("fast"),$("#loading").fadeIn("slow"),getVideo(n[1])):(bootstrap_alert.warning('<strong><span style="color: #9e1317;">Alert :</span></strong> Enter the <span style="color: #9e1317;"><strong>URL-address</strong></span> in the input field and press <strong>Enter</strong> or click on the <strong>"Download"</strong> button.</p>'),$("#url").focus(),$("#url").select()),!1}$("#download-btn").fadeOut("fast"),$("#loading").fadeIn("slow"),getVideo(n[1])}}),bootstrap_alert=function(){},bootstrap_alert.warning=function(e){$("#alert_placeholder").html('<div class="alert alert-warning"><a class="close" data-dismiss="alert">Ã—</a><span>'+e+"</span></div>")};